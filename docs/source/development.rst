Development
===========

Repository structure
--------------------

.github/workflows
^^^^^^^^^^^^^^^^^

data
^^^^

docs
^^^^

scr/oiflib
^^^^^^^^^^

This project uses a `src package layout <https://hynek.me/articles/testing-packaging/>`_.

tests
^^^^^

Top-level files
^^^^^^^^^^^^^^^

.darglint
"""""""""

.flake8
"""""""

.gitignore
""""""""""

.pre-commit-config.yaml
"""""""""""""""""""""""

.python-version
"""""""""""""""

.readthedocs.yaml
"""""""""""""""""

LICENSE.md
""""""""""

README.md
"""""""""

mypy.ini
""""""""

noxfile.py
""""""""""

poetry.lock
"""""""""""

pyproject.toml
""""""""""""""

Tools and practices
-------------------

This project implements many of the tools and best practices recommended in `Hypermodern Python`_.

.. _Hypermodern Python: https://cjolowicz.github.io/posts/hypermodern-python-01-setup/

Visual Studio Code
^^^^^^^^^^^^^^^^^^

Version and Dependency Management
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

- `pyenv <https://github.com/pyenv/pyenv>`_ for Python version management.
- `poetry <https://python-poetry.org/>`_ for packaging, dependency, and virtual environment management.

Testing
^^^^^^^

- `pytest <https://docs.pytest.org/en/latest/>`_ for unit testing.
    - with `coverage <https://coverage.readthedocs.io/>`_ to measure test coverage
- Property-based tests using `hypothesis <https://hypothesis.readthedocs.io/en/latest/>`_.
- `mocks <https://towardsdatascience.com/stop-mocking-me-unit-tests-in-pyspark-using-pythons-mock-library-a4b5cd019d7e>`_, `fakes, stubs <https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da>`_, or `markers <https://docs.pytest.org/en/latest/example/markers.html>`_ in testing

Formatting
^^^^^^^^^^

- `black <https://github.com/psf/black>`_ for formatting.
- `isort <https://timothycrosley.github.io/isort/>`_ to order imports based on the `Google styleguide <https://google.github.io/styleguide/pyguide.html?showone=Imports_formatting#313-imports-formatting>`_.

Static Type Checking
^^^^^^^^^^^^^^^^^^^^

- The project uses `type hints as per PEP 484 <https://www.python.org/dev/peps/pep-0484/>`_
- `mypy <http://mypy-lang.org/>`_ for static type checking

Documentation
^^^^^^^^^^^^^

Module and Function Docstrings
""""""""""""""""""""""""""""""

- `Google style <https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings>`_ `Docstrings <https://www.python.org/dev/peps/pep-0257/#what-is-a-docstring>`_

Project Documentation
"""""""""""""""""""""

- `sphinx <http://www.sphinx-doc.org/>`_ to generate documentation, with the following extentsions:
    - `autodoc <https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html>`_ to automatically generate documentation from docstrings
    - `napoleon <https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html>`_ to convert google-style docstrings to reStructuredText
- `readthedocs <https://readthedocs.org/>`_ to host the documentation generated by sphinx

Linting
^^^^^^^

- `flake8 <https://flake8.pycqa.org/en/latest/>`_ for linting, with the following plugins:
    - `flake8-black <https://github.com/peterjc/flake8-black>`_ to ensure alignment between linting and formatting tools
    - `flake8-isort <https://github.com/gforcada/flake8-isort>`_ to ensure alignment between linting and import ordering tools
    - `flake8-bugbear <https://github.com/PyCQA/flake8-bugbear>`_ to highlight various bugs and design issues not captured by other linters
    - `flake8-bandit <https://github.com/tylerwince/flake8-bandit>`_ to identify security issues
    - `flake8-annotation <https://github.com/python-discord/flake8-annotations>`_ to check for missing type hints
    - `flake8-docstrings <https://gitlab.com/pycqa/flake8-docstrings>`_ to check docstring style compliance
    - `darglint <https://github.com/terrencepreilly/darglint>`_ to check that docstring descriptions match function definitions

Continuous Integration
^^^^^^^^^^^^^^^^^^^^^^

- `Nox <https://nox.thea.codes/>`_ for test automation
- `GitHub Actions <https://github.com/features/actions>`_ for continuous integration
- `pre-commit <https://pre-commit.com/>`_ to leverage linters written in other languages


Security
^^^^^^^^

- `Saftey <https://github.com/pyupio/safety>`_ to identify security vulnerabilities


Not yet Implemented
^^^^^^^^^^^^^^^^^^^

It doesn't currently use:

- `pytype <https://google.github.io/pytype/>`_ for static type checking
- `typeguard <https://github.com/agronholm/typeguard>`_ for runtime type checking
- `Desert <https://desert.readthedocs.io/>`_ or `Marshmallow <https://marshmallow.readthedocs.io/>`_ for data validation
- `xdoctest <https://github.com/Erotemic/xdoctest>`_ to test docstring examples
- `sphinx-autodoc-typehints <https://github.com/agronholm/sphinx-autodoc-typehints>`_ to include type hints in documentation
- `codecov <https://codecov.io/>`_ to report testing coverage
- `pypi <https://pypi.org/>`_ for package hosting or `testpypi <https://test.pypi.org/>`_ to test package hosting
- `release-drafter <https://github.com/release-drafter/release-drafter>`_ to help draft release notes
- `Semantic Versioning <https://semver.org/>`_ to indicate breaking changes, minor changes, or bug fixes
